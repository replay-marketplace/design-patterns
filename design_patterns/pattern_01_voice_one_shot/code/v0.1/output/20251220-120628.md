# Input Prompt

I want to have a program that searches all Python files and extracts for all modules, Python modules, Python libraries that were imported. Tell me about the types of things that this code would need to search for. For example, like which keywords, obviously the word import, but are there some other ways to import stuff? Make a list of stuff that it should search for in terms of strings. Thanks.


---

# Anthropic Response

# Python Import Patterns to Search For

Here's a comprehensive list of import patterns your code should detect:

## 1. **Basic Import Statements**
- `import module_name`
- `import module1, module2, module3`
- `import package.submodule`

## 2. **From-Import Statements**
- `from module import name`
- `from module import name1, name2`
- `from module import *`
- `from package.submodule import name`
- `from . import name` (relative imports)
- `from .. import name` (parent relative imports)
- `from .submodule import name`

## 3. **Aliased Imports**
- `import module as alias`
- `from module import name as alias`
- `import package.submodule as alias`

## 4. **Multiline Imports**
```python
from module import (
    name1,
    name2,
    name3
)
```
or
```python
from module import \
    name1, name2
```

## 5. **Conditional Imports**
```python
if condition:
    import module

try:
    import module
except ImportError:
    import alternative_module
```

## 6. **Dynamic Imports**
- `__import__('module_name')`
- `importlib.import_module('module_name')`
- `importlib.__import__('module_name')`

## 7. **Edge Cases to Consider**

### Comments and Strings
- `# import module` (should be ignored)
- `"import module"` or `'import module'` (should be ignored, unless it's dynamic)
- Docstrings containing "import"

### Whitespace Variations
- `import   module` (multiple spaces)
- `import\tmodule` (tabs)
- Leading whitespace (indentation)

## **Keywords to Search For:**

1. **`import`** - primary keyword
2. **`from`** - for from-imports
3. **`as`** - for aliases
4. **`__import__`** - built-in function
5. **`importlib`** - standard library module for imports

## **Regular Expression Patterns (Suggested)**

Here are some regex patterns you might use:

```python
patterns = [
    r'^\s*import\s+[\w.]+',                          # basic import
    r'^\s*from\s+[\w.]+\s+import\s+',               # from import
    r'^\s*import\s+[\w.]+\s+as\s+\w+',              # import as
    r'^\s*from\s+[\w.]+\s+import\s+\w+\s+as\s+\w+', # from import as
    r'__import__\s*\(\s*["\'][\w.]+["\']\s*\)',     # __import__
    r'importlib\.import_module\s*\(\s*["\'][\w.]+["\']\s*\)', # importlib
]
```

## **Special Considerations:**

1. **Relative imports**: Dots (`.`, `..`, `...`) before module names
2. **Parenthesized imports**: Multiline imports with parentheses
3. **Backslash continuations**: Line continuations with `\`
4. **String literals**: Imports within strings (for dynamic imports)
5. **Comments**: Lines starting with `#` should be ignored
6. **Indentation**: Imports can be at any indentation level
7. **`__all__`**: Not an import, but defines what `from module import *` exports

## **Recommendation:**

Use Python's **`ast`** (Abstract Syntax Tree) module instead of regex for more robust parsing:

```python
import ast

tree = ast.parse(source_code)
for node in ast.walk(tree):
    if isinstance(node, ast.Import):
        # handle import statements
    elif isinstance(node, ast.ImportFrom):
        # handle from-import statements
```

This approach handles all edge cases automatically and is much more reliable than string searching!

# Input Prompt

Tell me more about the Python tree library. When I add attributes to the nodes, how do I view the attributes? Can I generate a JSON or something and print the JSON?


---

# Anthropic Response

# Python Tree Libraries

There are several Python tree libraries. Let me cover the most popular ones and how to work with node attributes:

## 1. **anytree** (Most Popular)

```python
from anytree import Node, RenderTree
from anytree.exporter import JsonExporter, DictExporter
import json

# Create nodes with attributes
root = Node("root", value=100, description="Root node")
child1 = Node("child1", parent=root, value=50, description="First child")
child2 = Node("child2", parent=root, value=75, description="Second child")
grandchild = Node("grandchild", parent=child1, value=25)

# View tree structure
for pre, _, node in RenderTree(root):
    print(f"{pre}{node.name}: value={node.value}")

# Access attributes directly
print(child1.value)  # 50
print(child1.description)  # "First child"

# Export to JSON
exporter = JsonExporter(indent=2)
json_output = exporter.export(root)
print(json_output)

# Export to dictionary
dict_exporter = DictExporter()
tree_dict = dict_exporter.export(root)
print(json.dumps(tree_dict, indent=2))
```

**Output:**
```json
{
  "name": "root",
  "value": 100,
  "description": "Root node",
  "children": [
    {
      "name": "child1",
      "value": 50,
      "description": "First child",
      "children": [
        {
          "name": "grandchild",
          "value": 25
        }
      ]
    },
    {
      "name": "child2",
      "value": 75,
      "description": "Second child"
    }
  ]
}
```

## 2. **treelib**

```python
from treelib import Tree
import json

# Create tree
tree = Tree()

# Add nodes with data attributes
tree.create_node("Root", "root", data={"value": 100, "type": "parent"})
tree.create_node("Child1", "child1", parent="root", data={"value": 50, "type": "child"})
tree.create_node("Child2", "child2", parent="root", data={"value": 75, "type": "child"})

# View tree
tree.show()

# Access node attributes
node = tree.get_node("child1")
print(node.data)  # {"value": 50, "type": "child"}
print(node.data["value"])  # 50

# Convert to dictionary
tree_dict = tree.to_dict(with_data=True)
print(json.dumps(tree_dict, indent=2))

# Or use to_json (if available in your version)
json_output = tree.to_json(with_data=True)
print(json_output)
```

## 3. **Custom Solution with dict/JSON**

```python
import json

class TreeNode:
    def __init__(self, name, **attributes):
        self.name = name
        self.attributes = attributes
        self.children = []
    
    def add_child(self, child):
        self.children.append(child)
        return child
    
    def to_dict(self):
        """Convert tree to dictionary"""
        result = {"name": self.name}
        result.update(self.attributes)
        if self.children:
            result["children"] = [child.to_dict() for child in self.children]
        return result
    
    def to_json(self, indent=2):
        """Convert tree to JSON string"""
        return json.dumps(self.to_dict(), indent=indent)
    
    def __repr__(self, level=0):
        """Pretty print tree"""
        indent = "  " * level
        attrs = ", ".join(f"{k}={v}" for k, v in self.attributes.items())
        result = f"{indent}{self.name} ({attrs})\n"
        for child in self.children:
            result += child.__repr__(level + 1)
        return result

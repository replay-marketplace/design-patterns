# Input Prompt

Tell me more about the Python tree library. When I add attributes to the nodes, how do I view the attributes? Can I generate a JSON or something and print the JSON?


---

# Anthropic Response

# Python Tree Libraries and Node Attributes

There are several tree libraries in Python. Let me cover the most popular ones and how to work with node attributes:

## 1. **anytree** (Most Popular)

```python
from anytree import Node, RenderTree
from anytree.exporter import JsonExporter, DictExporter
import json

# Create nodes with custom attributes
root = Node("root", age=30, city="NYC")
child1 = Node("child1", parent=root, age=10, city="LA")
child2 = Node("child2", parent=root, age=15, city="SF")

# View tree structure
for pre, _, node in RenderTree(root):
    print(f"{pre}{node.name} - Age: {node.age}, City: {node.city}")

# Export to JSON
exporter = JsonExporter(indent=2)
json_str = exporter.export(root)
print(json_str)

# Export to Dictionary
dict_exporter = DictExporter()
tree_dict = dict_exporter.export(root)
print(json.dumps(tree_dict, indent=2))
```

**Output:**
```
root - Age: 30, City: NYC
├── child1 - Age: 10, City: LA
└── child2 - Age: 15, City: SF
```

## 2. **treelib**

```python
from treelib import Tree
import json

tree = Tree()

# Add nodes with data
tree.create_node("Root", "root", data={"age": 30, "city": "NYC"})
tree.create_node("Child1", "child1", parent="root", data={"age": 10, "city": "LA"})
tree.create_node("Child2", "child2", parent="root", data={"age": 15, "city": "SF"})

# View tree
tree.show()

# Access attributes
node = tree.get_node("child1")
print(f"Child1 data: {node.data}")

# Convert to JSON
def tree_to_dict(tree, nid):
    node = tree.get_node(nid)
    result = {
        "identifier": node.identifier,
        "tag": node.tag,
        "data": node.data,
        "children": [tree_to_dict(tree, child) for child in tree.children(nid)]
    }
    return result

tree_dict = tree_to_dict(tree, tree.root)
print(json.dumps(tree_dict, indent=2))
```

## 3. **Custom Approach with Built-in dict**

```python
import json

class TreeNode:
    def __init__(self, name, **attributes):
        self.name = name
        self.attributes = attributes
        self.children = []
    
    def add_child(self, child):
        self.children.append(child)
        return child
    
    def to_dict(self):
        return {
            "name": self.name,
            **self.attributes,
            "children": [child.to_dict() for child in self.children]
        }
    
    def to_json(self, indent=2):
        return json.dumps(self.to_dict(), indent=indent)

# Usage
root = TreeNode("root", age=30, city="NYC")
child1 = root.add_child(TreeNode("child1", age=10, city="LA"))
child2 = root.add_child(TreeNode("child2", age=15, city="SF"))

# View as JSON
print(root.to_json())
```

## Comparison

| Library | Pros | Cons |
|---------|------|------|
| **anytree** | Built-in JSON export, clean syntax | Additional dependency |
| **treelib** | Good visualization, node IDs | Manual JSON conversion |
| **Custom** | Full control, no dependencies | More code to write |

## Recommended: anytree with Custom Attributes

```python
from anytree import Node, RenderTree
from anytree.exporter import DictExporter
import json

# Custom attribute filtering
class CustomDictExporter(DictExporter):
    def __init__(self, *
